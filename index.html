<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge"> 

        <!-- <link rel="stylesheet" type="text/css" href="./image-loader.css"> -->
        <!-- <link rel="stylesheet" type="text/css" href="./image-editor.css"> -->

        <title>Canvas editor</title>
    </head>
    <body>
        <h2>Canvas editor</h2>
       
        <div class="playfield" style="height: 400px; background: black"></div>

        B: <input class="editor-change" type="range" min="-1" max="1" step="0.01" id="brighteness">
        S: <input type="range" min="-1" max="1" step="0.01" id="saturation" class="editor-change">
        H: <input type="range" min="-1" max="1" step="0.01" id="hue" class="editor-change">
        C: <input type="range" min="-1" max="1" step="0.01" id="contrast" class="editor-change">    
    
        <select class="transformMethods"></select>

        <h3>Images</h3>
        <div class="image-loader">
            <div class="image-preview">
                <span class="demo-card-image__filename">Image.jpg</span>
            </div>
            <input type="file" class="image-input" />
        </div>


        <script type="module">
            import ImageEditor from './ImageEditor.js'
            const myEditor = new ImageEditor('.playfield', '.preview-container')
                  myEditor.setImage('./img.jpg')

            window.editor = myEditor

            document.querySelectorAll('.editor-change').forEach( slider => {
                slider.addEventListener('input', (e) => {
                    const element = e.target

                    myEditor.updateOption(element.getAttribute('id'), Number.parseFloat(element.value))
                })
            })

            const select = document.querySelector('.transformMethods')

            myEditor.getTransformMethods().forEach( tfMethod => {
                const method = document.createElement('option')
                      method.value = method.innerHTML = tfMethod
                      select.appendChild(method)
            })

            select.addEventListener('change', (e) => {
                myEditor.setTransformMethod(e.target.value)
            })

            window.myEditor = myEditor
        </script>

        <script src="./ImageLoader.js"></script>

        <script>
            const iu = new ImageLoader('.image-loader')
            iu.on('load', (img) => {
                editor.setImage(img)
            })
        </script>
    </body>
</html>